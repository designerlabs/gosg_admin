<div class="container right-content">

  <div class="curdHeader">
    <div class="col-md-4 curdHeadingLeft">
      <h3>{{ 'actmon.header' | translate }}</h3>
    </div>
  </div>
  <div *ngIf="!commonservice.isRead" [innerHTML]="commonservice.messageSuccess">

  </div>
  <div *ngIf="commonservice.isRead">
    <div class="example-container mat-elevation-z8 col-md-12">
    <mat-tab-group (selectedIndexChange)="tabAction($event)">
      <!-- USERS -->
      <mat-tab label="{{ 'actmon.component.users' | translate }}">
        <!-- <div class="example-container mat-elevation-z8 mat-tbl"> -->
        <div class="col-md-3 paddingTop-10" style="padding-left:30px;">
          <mat-form-field class="example-full-width">
            <mat-select [(ngModel)]="usertype" placeholder="{{ 'common.filterby.filterby' | translate }}" (change)="filterType($event)">
              <!-- <mat-option [value]="1">{{ 'common.filterby.all' | translate }}</mat-option> -->
              <mat-option [value]="2">{{ 'common.filterby.email' | translate }}</mat-option>
              <mat-option [value]="3">{{ 'common.filterby.icno' | translate }}</mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <div class="col-md-9 paddingTop-10" *ngIf="filterTypeVal != 1 && filterTypeVal != 0">
          <mat-form-field>
            <input #keyword matInput (keyup)="applyFilter($event.target.value)" [(ngModel)]="value" placeholder="{{ 'common.placeholder.keywords' | translate }}">
            <button mat-button *ngIf="value" matSuffix mat-icon-button aria-label="Clear" (click)=" resetSearch()">
              <mat-icon>close</mat-icon>
            </button>
          </mat-form-field>

          <div *ngIf="isActiveList" [ngClass]="{'listParent':searchUserResult.length < 10,'listParent-w-scroll':searchUserResult.length >= 10}"
            (scroll)="onScroll($event,1)">
            <ul class="list-group pmd-z-depth pmd-list pmd-card-list pmd-list">
              <li class="list-group-item" *ngFor="let data of searchUserResult">
                <a class="list-link" (click)="getVal(data?.identificationNo,data?.email)">
                  <h4>{{data?.fullName}}</h4>
                  <p>{{data?.identificationNo}}</p>
                  <p>{{data?.email}}</p>
                </a>
              </li>
            </ul>
          </div>

        </div>

        <mat-table class="col-md-12" *ngIf="userList && dataSource.data" #table [dataSource]="dataSource">

          <!-- No Column -->
          <ng-container matColumnDef="no">
            <mat-header-cell class="text-align-left noColumn" *matHeaderCellDef> {{ 'common.tableHeader.num' | translate }} </mat-header-cell>
            <mat-cell class="text-align-left noColumn" *matCellDef="let element; let i = index;">
              {{(seqPageNum == 1) ? (i + 1) : ((seqPageNum * seqPageSize) - seqPageSize) + (i + 1) }}
            </mat-cell>
          </ng-container>

          <!-- slideTitle Column -->
          <ng-container matColumnDef="username">
            <mat-header-cell *matHeaderCellDef style="flex: 0 0 20%;"> {{ 'usermgmt.tableHeader.fullname' | translate }}</mat-header-cell>
            <!--  style="flex: 0 0 40%;" -->
            <mat-cell *matCellDef="let element" (click)="getRow(element)" style="flex: 0 0 20%;"> {{element.userName}} </mat-cell>
          </ng-container>

          <ng-container matColumnDef="idno">
            <mat-header-cell *matHeaderCellDef style="flex: 0 0 10%;"> {{ 'actmon.tableHeader.idno' | translate }}</mat-header-cell>
            <mat-cell *matCellDef="let element" (click)="getRow(element)" style="flex: 0 0 10%;"> {{element.identificationNo}} </mat-cell>
          </ng-container>

          <ng-container matColumnDef="serviceName">
            <mat-header-cell *matHeaderCellDef style="flex: 0 0 25%;"> {{ 'actmon.tableHeader.svcname' | translate }}</mat-header-cell>
            <mat-cell *matCellDef="let element" (click)="getRow(element)" style="flex: 0 0 25%;"> {{element.serviceName}} </mat-cell>
          </ng-container>

          <ng-container matColumnDef="submissionRefno">
            <mat-header-cell *matHeaderCellDef style="flex: 0 0 10%;"> {{ 'actmon.tableHeader.subrefno' | translate }}</mat-header-cell>
            <mat-cell *matCellDef="let element" (click)="getRow(element)" style="flex: 0 0 10%;"> {{element.submissionRefno}} </mat-cell>
          </ng-container>

          <!-- status Column -->
          <ng-container matColumnDef="status">
            <mat-header-cell *matHeaderCellDef class="statusColumn">{{ 'usermgmt.tableHeader.accstatus' | translate }}</mat-header-cell>
            <mat-cell *matCellDef="let element" class="statusColumn">
              {{ element.status }}
            </mat-cell>
          </ng-container>

          <!-- date Column -->
          <ng-container matColumnDef="date">
            <mat-header-cell *matHeaderCellDef class="actionColumn">{{ 'actmon.tableHeader.datereceive' | translate }}</mat-header-cell>
            <mat-cell *matCellDef="let element" class="actionColumn">
              {{ element.receivedDate }}
            </mat-cell>
          </ng-container>

          <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
          <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
        </mat-table>
        <div *ngIf="showNoData" class="col-md-12 text-align-Center padding-20">{{ 'common.msg.nodata' | translate }} </div>


        <!-- </div> -->
      </mat-tab>
      <!-- AGENCIES -->
      <mat-tab label="{{ 'actmon.component.agencies' | translate }}">

        <div class="col-md-6 paddingTop-10">
          <mat-form-field class="example-full-width">
            <mat-select [(ngModel)]="agcSelect" placeholder="{{ 'common.filterby.filterby' | translate }}" (change)="agcFilterType($event)">
              <mat-option [value]="0" (click)="getAgenciesDataByID(0,1,10)">{{ 'common.filterby.all' | translate }}</mat-option>
              <mat-option *ngFor="let agc of agencyList" [value]="agc.agencyCode" title="{{ agc.agencyName }}" (click)="getAgenciesDataByID(agc.agencyCode,1,10)">{{ agc.agencyName }}</mat-option>
            </mat-select>
          </mat-form-field>

        </div>

        <mat-table class="col-md-12" *ngIf="agencyActivityList && dataSource1.data" #table [dataSource]="dataSource1">

          <!-- No Column -->
          <ng-container matColumnDef="no">
            <mat-header-cell class="text-align-Center noColumn" *matHeaderCellDef> {{ 'common.tableHeader.num' | translate }} </mat-header-cell>
            <mat-cell class="text-align-Center noColumn" *matCellDef="let element; let i = index;">
              {{(seqPageNum == 1) ? (i + 1) : ((seqPageNum * seqPageSize) - seqPageSize) + (i + 1) }}
            </mat-cell>
          </ng-container>

          <!-- svcname Column -->
          <ng-container matColumnDef="svcname">
            <mat-header-cell *matHeaderCellDef style="flex: 0 0 30%;"> {{ 'actmon.tableHeader.svcname' | translate }}</mat-header-cell>
            <!--  style="flex: 0 0 40%;" -->
            <mat-cell *matCellDef="let element" (click)="getRow(element)" style="flex: 0 0 30%;"> {{element.serviceName}} </mat-cell>
          </ng-container>

          <!-- name Column -->
          <ng-container matColumnDef="name">
            <mat-header-cell *matHeaderCellDef style="flex: 0 0 35%;">{{ 'actmon.tableHeader.agcname' | translate }}</mat-header-cell>
            <mat-cell *matCellDef="let element" style="flex: 0 35%;">
              {{ element.agencyName }}
            </mat-cell>
          </ng-container>

          <!-- status Column -->
          <ng-container matColumnDef="status">
            <mat-header-cell *matHeaderCellDef class="statusColumn"> {{ 'actmon.tableHeader.status' | translate }}</mat-header-cell>
            <mat-cell *matCellDef="let element" (click)="getRow(element)" class="statusColumn"> {{element.status}} </mat-cell>
          </ng-container>

          <!-- date Column -->
          <ng-container matColumnDef="date">
            <mat-header-cell *matHeaderCellDef class="actionColumn">{{ 'actmon.tableHeader.datereceive' | translate }}</mat-header-cell>
            <mat-cell *matCellDef="let element" class="actionColumn">
              {{ element.receivedDate }}
            </mat-cell>
          </ng-container>

          <mat-header-row *matHeaderRowDef="displayedColumns1"></mat-header-row>
          <mat-row *matRowDef="let row; columns: displayedColumns1;"></mat-row>
        </mat-table>
        <div *ngIf="showNoData" class="col-md-12 text-align-Center padding-20">{{ 'common.msg.nodata' | translate }} </div>
      </mat-tab>
    </mat-tab-group>
    </div>

    <div *ngIf="userList || agencyActivityList" class="float-right paddingTop-15">
      <mat-form-field class="table_footer_pagecount">
        <mat-select class="font-size-s text-align-Center" [(ngModel)]="commonservice.defaultPageSize" (change)="pageChange($event, commonservice.recordTable?.totalPages)">
          <mat-option *ngFor="let pgcount of commonservice.pageSize" [value]="pgcount.size">{{pgcount.size}}</mat-option>
          <!-- <mat-option value="10">10</mat-option>
          <mat-option value="25">25</mat-option>
          <mat-option value="50">50</mat-option> -->
        </mat-select>
      </mat-form-field>
      <span class="float-right">
        <span class="table_footer_pagination">{{ 'common.tableBottom.page' | translate }}
          <strong>{{recordTable?.pageNumber}}</strong> {{ 'common.tableBottom.of' | translate }}
          <strong>{{recordTable?.totalPages}}</strong> {{ 'common.tableBottom.in' | translate }}
          <strong>{{recordTable?.totalElements}}</strong> data </span>
        <!-- <strong>{{recordTable?.totalElements}}</strong> {{ 'usermgmt.tablebottom.users' | translate }}</span> -->
        <button mat-mini-fab color="basic" [disabled]="noPrevData" (click)="paginatorL(recordTable?.pageNumber)">
          <i [ngClass]="commonservice.icon.arrLeft" aria-hidden="true"></i>
        </button>
        <button mat-mini-fab color="basic" [disabled]="noNextData" (click)="paginatorR(recordTable?.pageNumber, recordTable?.totalPages)">
          <i [ngClass]="commonservice.icon.arrRight" aria-hidden="true"></i>
        </button>
      </span>
    </div>
  </div>


</div>



<!--
<app-confirm-dialog  #deleteModal
  [title]="'common.icon.warn'"
  [content]="'common.msg.delete'"
  [state]="'common.state.warn'"
  [isReset]="'true'"
  (resetMethod)="resetMethod($event, data.messageId)">
</app-confirm-dialog> -->
